-*- org -*-

* DONE Apostrophe does not match                                        :BUG:
  CLOSED: [2026-01-06 Tue 17:56]
  Apostrophe should work the same as any letter. Meaning that the following
  should match, but it doesn't.
      ----------------------------------------
      zdb "bat'" klingon.zdb
      zdb "bat'leth" klingon.zdb
      ----------------------------------------
* DONE Search fails if all terms are negated                            :BUG:
  CLOSED: [2026-01-08 Thu 17:07]
  Should work (not result in error message).
      ----------------------------------------
      zdb -- -batlh klingon.zdb
      ----------------------------------------
* DONE Database is clobbered when adding fields                         :BUG:
  CLOSED: [2026-01-08 Thu 17:46]
  The following command, which matches multiple records, clobbers
  'klingon.zdb', overwriting it with a zero-byte file!!

      ----------------------------------------
      zdb 'batlh' hi=nono klingon.zdb
      ----------------------------------------
* TODO Query with missing leading parenthesis should work               :BUG:
* TODO Database syntax -- only allow '\t' for indent
  The use of <space> for indentation makes almost all normal text files into
  valid ZDB files which makes far to easy to accidentally/unintentionally
  invoke zdb in a way which messes up some innocent text file.
* TODO Add query prefix '#' (comment matching)
* TODO Add query prefix '^' (case sensitivity)
  Also change --smart-match so that an upper case letter will affect the
  matching of that specific search term, but not the whole query.
* TODO Support multiple queries (using -e)
  These should, just like for grep, be combined using OR.
* TODO `--show-query` -- to show cleaned up query (without searching)
  What would the option be called? `--show-query`?

  The normalized query should be shown. -- It is not totally obvious that this
  is the best version to show, since the normalized version might LONGER than
  what the user inputted (for example, `-=(a b c)` becomes `-=a, -=b, -=c`) --
  but having it spelled out like this makes it easier to reason about and debug
  the query. -- Which, I think would be one of the most useful aspects of a
  `--show-query` option.
* Prefix support
  For ':' matches, reduce the inputted entry by removing non-matching fields,
  and replacing them with '[]' (so that the hilite marks are still valid).
* UNIT TESTS
** TODO Database field insert, non-matching query (should fail)
** TODO Database field insert, multiple-matching query (should fail)
** TODO Database field insert, single-matching query (should work)
** TODO Database record insert
* [eof]
